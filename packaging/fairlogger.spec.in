# SPDX-FileCopyrightText: 2025 GSI Helmholtzzentrum fÃ¼r Schwerionenforschung GmbH
# SPDX-License-Identifier: GPL-3.0-or-later

%global debug_package %{nil}

Name:           fairlogger
Version:        ${VERSION}
Release:        1%{?dist}
Summary:        Lightweight and fast C++ logging library
License:        LGPL-3.0-or-later
URL:            https://github.com/FairRootGroup/FairLogger
Source0:        %{name}-%{version}.tar.gz

BuildRequires:  cmake >= 3.15
BuildRequires:  faircmakemodules
BuildRequires:  gcc-c++
BuildRequires:  git

%description
FairLogger is a lightweight and fast C++ logging library designed for
efficient logging across multiple output targets.

%package devel
Summary:        Development files for FairLogger
Requires:       %{name}%{?_isa} = %{version}-%{release}

%description devel
Development files and headers for FairLogger.

%prep
%autosetup -n %{name}-%{version}
sed -i 's/get_git_version()/get_git_version(DEFAULT_VERSION "%{version}")/' CMakeLists.txt

%build
%cmake \
    -DCMAKE_BUILD_TYPE=Release \
    -DBUILD_TESTING=OFF \
    -DUSE_EXTERNAL_FMT=OFF \
    .
%cmake_build

%install
%cmake_install

%files
%license LICENSE
%doc README.md
%{_libdir}/libFairLogger.so.*

%files devel
%{_includedir}/fairlogger/
%{_libdir}/libFairLogger.so
%{_libdir}/cmake/FairLogger-*/

%changelog
* ${DATE} SDE Group <cit-sde@gsi.de> - ${VERSION}-1
- Initial RPM package
